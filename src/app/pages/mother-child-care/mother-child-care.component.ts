import { CommonModule } from '@angular/common';
import { Component } from '@angular/core';
import { FormControl, ReactiveFormsModule } from '@angular/forms';


interface Section {
  stage: 'pregnancy' | 'postpartum' | 'babycare';
  title: string;
  items: string[];
  hasReminderBtn?: boolean;
}

@Component({
  selector: 'app-mother-child-care',
    standalone: true,
imports: [CommonModule, ReactiveFormsModule],
  templateUrl: './mother-child-care.component.html',
styleUrls: ['./mother-child-care.component.scss']
})
export class MotherChildCareComponent {
   stageControl = new FormControl('all');
  searchControl = new FormControl('');

  sections: Section[] = [
  {
    stage: 'pregnancy',
    title: '🔶 نصائح أثناء الحمل',
    items: [
      'احرصي على تناول غذاء صحي ومتوازن غني بالفيتامينات والمعادن',
      'تابعي الحمل مع الطبيب بانتظام كل شهر أو حسب إرشاداته',
      'تجنبي الأدوية والعلاجات بدون استشارة الطبيب',
      'خدي الفيتامينات الموصى بها مثل حمض الفوليك والحديد',
      'مارسي رياضة خفيفة مثل المشي أو اليوغا للحوامل',
      'ابتعدي عن التوتر ووفري لنفسك بيئة هادئة ومريحة',
      'راقبي أي أعراض خطيرة زي النزيف، ألم مستمر، أو حركة الجنين الضعيفة'
    ],
  },
  {
    stage: 'pregnancy',
    title: '🔶 التحضير للولادة',
    items: [
      'جهزي شنطة المستشفى من الشهر الثامن (ملابس، حفاضات، أوراق، مستلزماتك)',
      'تعرفي على علامات الولادة: الطلق المنتظم، نزول ماء الجنين، ألم أسفل الظهر',
      'اتكلمي مع الطبيب عن خطة الولادة المناسبة ليكي (طبيعية ولا قيصرية)',
      'حضري شخص يرافقك وقت الولادة (الزوج أو الأم)',
      'تعلمي تمارين التنفس اللي هتفيدك أثناء الولادة'
    ],
  },
  {
    stage: 'postpartum',
    title: '🔶 نصائح نفسية للأم بعد الولادة',
    items: [
      'راقبي نفسك من أعراض اكتئاب ما بعد الولادة (حزن دائم، بكاء، تعب شديد)',
      'اطلبي الدعم من الزوج والعيلة، ومتتكسفيش تطلبي مساعدة نفسية',
      'حاولي ترتاحي وقت نوم الطفل علشان تسترجعي طاقتك',
      'كلي كويس واشربي سوائل كتير، واهتمي بصحتك زي ما بتهتمي بالبيبي',
      'اتكلمي مع أمهات تانيين، مشاركة التجارب بتساعد جدًا',
    ],
  },
  {
    stage: 'babycare',
    title: '🔶 العناية بالمولود الجديد',
    items: [
      'الرضاعة الطبيعية الحصرية أول 6 شهور مهمة جدًا لنمو الطفل',
      'غيري الحفاض بانتظام لتجنب التسلخات',
      'نظفي سرة الطفل بلطف، واهتمي بنظافة جسمه يوميًا',
      'راقبي درجة حرارة الطفل، ومتابعة أي تغير في سلوكه',
      'ما تسيبيش الطفل ينام على بطنه لتجنب خطر الاختناق',
      'اعملي بيئة نوم آمنة: مرتبة ثابتة، مفيش لعب كتير حوالينه'
    ],
  },
  {
    stage: 'babycare',
    title: '🔶 تطعيمات الطفل حسب العمر',
    items: [
      'عند الولادة: تطعيم الكبد B (خلال أول 24 ساعة)',
      'عند شهرين: 5 تطعيمات أساسية (DTP، Hib، Polio، Hep B، Pneumococcal)',
      'عند 4 أشهر: تكرار نفس التطعيمات السابقة',
      'عند 6 أشهر: جرعات إضافية + تطعيم الإنفلونزا الموسمية',
      'عند 9 أشهر: الحصبة الأولى',
      'عند 12 شهر: MMR، جدري الماء، الكبد A',
      'احتفظي بكرت التطعيم وجدديه دايمًا مع الطبيب',
    ],
  },
  {
    stage: 'babycare',
    title: '🔶 نمو الطفل شهر بشهر',
    items: [
      '1 شهر: يبدأ في رفع الرأس قليلًا، يتعرف على صوت الأم',
      '2 شهر: يبتسم، يتابع الأشياء المتحركة بعينيه',
      '3-4 شهور: يبدأ في الإمساك بالألعاب، يصدر أصواتًا مرحة',
      '5-6 شهور: يجلس بمساعدة، يتقلب من بطنه لظهره والعكس',
      '7-9 شهور: يبدأ في الزحف، ينطق كلمات بسيطة زي ماما وبابا',
      '10-12 شهر: يقف بمساعدة، يمشي خطوات، يقلد الحركات',
    ],
  },
   {
    stage: 'babycare',
    title: '🔶 تغذية الطفل بعد 6 شهور',
    items: [
      'ابدئي بإدخال الطعام الصلب بعد 6 شهور مع استمرار الرضاعة',
      'ابدئي بخضروات مهروسة مثل الكوسة، البطاطا، الجزر',
      'قدمي نوع جديد كل 3 أيام لمتابعة الحساسية',
      'امتنعي عن العسل والملح والسكر في السنة الأولى',
      'استمري في الرضاعة الطبيعية أو الصناعية مع الطعام',
      'قدمي الأكل بقوام مناسب لعمر الطفل وتطور فمه',
      'راقبي البراز والجلد لأي علامات حساسية أو عدم تحمل',
    ],
  },
  {
    stage: 'babycare',
    title: '🔶 السلامة في المنزل لحماية الطفل',
    items: [
      'ركبي حواجز على السلالم والنوافذ',
      'احفظي الأدوية والمنظفات بعيدًا عن متناول الطفل',
      'ثبتي الأثاث الثقيل على الحائط لمنع سقوطه',
      'غطي مقابس الكهرباء بأغطية أمان',
      'لا تتركي الطفل وحده على السرير أو الطاولة',
      'استخدمي كراسي أطفال مزودة بحزام أمان أثناء الأكل',
      'راقبي دائمًا الطفل وقت اللعب أو الزحف',
    ],
  }
];


  filteredSections(): Section[] {
    const selectedStage = this.stageControl.value ?? 'all';
    const searchText = this.searchControl.value?.trim().toLowerCase() ?? '';

    let filtered = selectedStage === 'all' ? this.sections : this.sections.filter(s => s.stage === selectedStage);

    if (searchText) {
      filtered = filtered.filter(
        section =>
          section.title.toLowerCase().includes(searchText) ||
          section.items.some(item => item.toLowerCase().includes(searchText))
      );
    }

    return filtered;
  }
}
