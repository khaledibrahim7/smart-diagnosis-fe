<div class="bmi-container">
  <h2>BMI Calculator</h2>

  <p class="description">
    Body Mass Index (BMI) helps you assess your health status based on your weight and height. Enter your data below:
  </p>

  <form [formGroup]="bmiForm" (ngSubmit)="calculateBMI()">
    <div class="form-group">
      <label>Weight ({{ weightUnit }})</label>
      <input type="number" formControlName="weight" />
      <button type="button" class="unit-toggle-btn" (click)="toggleWeightUnit()">Toggle Weight Unit</button>
    </div>

    <div class="form-group">
      <label>Height ({{ heightUnit }})</label>
      <input type="number" formControlName="height" />
      <button type="button" class="unit-toggle-btn" (click)="toggleHeightUnit()">Toggle Height Unit</button>
    </div>

    <button type="submit" [disabled]="bmiForm.invalid">Calculate</button>
  </form>

  <div *ngIf="result !== null" class="result" [ngClass]="statusClass">
    <p>Result: <strong>{{ result }}</strong></p>
    <p>Status: <strong>{{ status }}</strong></p>

    <div class="bmi-bar-wrapper">
      <div class="bmi-bar">
        <div class="indicator" [style.left.%]="bmiPercentage"></div>
      </div>
      <div class="bmi-labels">
        <span>Underweight</span>
        <span>Normal</span>
        <span>Overweight</span>
        <span>Obese</span>
      </div>
    </div>

    <p class="tip-text">{{ tipText }}</p>

    <button (click)="resetForm()">Recalculate</button>
  </div>

  <section class="calorie-calculator">
    <h2>Calorie Calculator</h2>

    <form [formGroup]="calorieForm" (ngSubmit)="calculateCalories()">
      <div class="form-group">
        <label>Age (years)</label>
        <input type="number" formControlName="age" />
      </div>

      <div class="form-group">
        <label>Gender</label>
        <select formControlName="gender">
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
      </div>

      <div class="form-group">
        <label>Weight (kg)</label>
        <input type="number" formControlName="weight" />
      </div>

      <div class="form-group">
        <label>Height (cm)</label>
        <input type="number" formControlName="height" />
      </div>

      <div class="form-group">
        <label>Activity Level</label>
        <select formControlName="activityLevel">
          <option value="sedentary">Sedentary</option>
          <option value="light">Lightly Active</option>
          <option value="moderate">Moderately Active</option>
          <option value="active">Active</option>
          <option value="veryActive">Very Active</option>
        </select>
      </div>

      <button type="submit" [disabled]="calorieForm.invalid">Calculate Calories</button>
    </form>

    <div *ngIf="calorieResult !== null" class="calorie-result">
      <p>Daily Caloric Requirement: <strong>{{ calorieResult }}</strong> kcal</p>
      <p>{{ calorieTip }}</p>

      <h3>Suggested Daily Meals:</h3>
      <ul>
        <li>Breakfast: Eggs, whole grain bread, vegetables.</li>
        <li>Lunch: Grilled chicken, brown rice, salad.</li>
        <li>Dinner: Fish, cooked vegetables.</li>
        <li>Snacks: Fruits, nuts.</li>
      </ul>
    </div>
  </section>

  <section class="bmi-history">
    <h2>BMI Trend Over Time</h2>

    <form [formGroup]="bmiHistoryForm" (ngSubmit)="addBmiRecord()">
      <div class="form-group">
        <label>Date</label>
        <input type="date" formControlName="date" />
      </div>

      <div class="form-group">
        <label>BMI</label>
        <input type="number" step="0.1" formControlName="bmi" />
      </div>

      <button type="submit" [disabled]="bmiHistoryForm.invalid">Add Entry</button>
    </form>

    <canvas #bmiChart></canvas>
  </section>

  <section class="exercise-guide">
    <h2>Recommended Exercises</h2>

    <p>Exercises tailored to each BMI category and fitness level. Start gradually and focus on routines that improve fitness and burn fat.</p>

    <ul>
      <li>
        <h3>Brisk Walking</h3>
        <iframe width="320" height="180"
          src="https://www.youtube.com/embed/Br1cFpHWIRM"
          title="Brisk Walking Exercise"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
        <p>Start with 20 minutes of brisk walking daily, then gradually increase time or pace to improve heart health and burn calories.</p>
      </li>

      <li>
        <h3>Belly Fat Burning Exercises</h3>
        <iframe width="320" height="180"
          src="https://www.youtube.com/embed/6iFVbK76buA"
          title="Belly Fat Burning Workouts"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
        <p>Practice these targeted exercises to burn abdominal fat, combined with a healthy diet for best results.</p>
      </li>
    </ul>
  </section>
</div>
